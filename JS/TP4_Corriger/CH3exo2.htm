<!DOCTYPE html>
<html>
    <head>
			<title> CH 3 Exo 2 </title>
			<meta   http-equiv = "Content-Type"     content="text/html; charset=utf-8" />
            <script src="biblio.js"></script>
			<script>
			 function validation(){
				  let i,e ;
				  
				  let f1       = $("f1");
				  let c        =  `- Veuillez saisir le(s) champ(s) suivant(s) : \n\n`;
				  let longInit = c.length ; // Longueur initiale de la chaine c
				  
				  // reg est une expression régulière simplifiée pour vérifier le format d'une adresse mail
				  let reg      = new RegExp("^[a-z0-9._-]+@[a-z0-9-_]+\\.[a-z0-9]{2,4}$","i");
				  // reg2 est une expression régulière pour vérifier le format d'un code postal
				  let reg2     = /^[0-9]{5}$/;
				  
				  // recherche des champs vides
				  let listNode=document.getElementsByClassName("saisie"); 
				  
				  for (i=0;i<listNode.length;i++){
					  if (listNode[i].value=="") c+= listNode[i].name + ` / `
				  }

				  // Si tous les champs ont été saisis on efface c 
				  if (c.length == longInit)   c=``; 
				  
				  // Vérification du code postal on suppose un nombre de 5 chiffres
				  
				  e = $("cp").value;   
				  if (e!="" && !reg2.test(e)) c+= `\n - Code postal non valide `;
				  
				  // Vérification de l'adresse mail			  
				  e = $("mail").value;
				  if (e!="" && !reg.test(e))  c+= `\n- Email non valide `;
				  
				  (c.length != 0)?alert(c):alert(`saisie correcte`);
			 }
			 onload= function(){$("nom").focus()};

			</script>
    

	</head>
  
  <body bgcolor="#A6CAF0">
         <form id="f1">		       
		   <fieldset><legend> Saisie de l'identité d"un client</legend>
              <p><label for="nom">       Nom *: 		</label><input type="text" class="saisie" name="nom" 	 id="nom" 	 size="15" maxlength="15"></p>
              <p><label for="prenom">    Prénom * : 	</label><input type="text" class="saisie" name="prenom"  id="prenom" size="15" maxlength="15"></p>
              <p><label for="rue">       Rue * : 		</label><input type="text" class="saisie" name="rue" 	 id="rue" 	 size="30" maxlength="30"></p>			  
              <p><label for="cp">        CP * : 		</label><input type="text" class="saisie" name="cp"   	 id="cp" 	 size="5"  maxlength="5"> </p>				  
              <p><label for="ville">     Ville * : 		</label><input type="text" class="saisie" name="ville"   id="ville"  size="20" maxlength="20"></p>	
              <p><label for="mail">   	 Mail * : 		</label><input type="text" class="saisie" name="mail" 	 id="mail"   size="30" maxlength="50"></p>
              <p><label for="tel"> 		 Téléphone * :  </label><input type="text" class="saisie" name="tel" 	 id="tel" 	 size="15" maxlength="15"></p>			  	  
              <p><input type="reset"     value="RAZ"></p>
              <p><input type="button"    value="Envoi" id="bt"></p>
           </fieldset>
		</form>

  </body>
</html>
<script>
     $("bt").onclick = validation;
</script>